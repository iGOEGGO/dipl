if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if(nchar(j)!=10&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!(dateReg1 || dateReg2)) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
format="%d.%m.%Y",
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if(nchar(j)!=10&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 || !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
format="%d.%m.%Y",
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if(nchar(j)!=10&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
format="%d.%m.%Y",
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if(nchar(j)!=10&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
format="%d.%m.%Y",
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if(nchar(j)!=10&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if(nchar(j)!=10&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if((nchar(j)!=10||nchar(j)!=8)&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if((nchar(j)<8&&nchar(j)<10)&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}\\-(0?[1-9]|1[012])\\-(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14"),
dateEight = c("2020/05/14","2020/05/14","2020/05/14","2020/05/14"),
dateNine = c("2020-05-14","2020-05-14","2020-05-14","2020-05-14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if((nchar(j)<8&&nchar(j)<10)&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}(\\/|-|\\.)(0?[1-9]|1[012])(\\/|-|\\.)(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
tz="Europe/Vienna")
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14"),
dateEight = c("2020/05/14","2020/05/14","2020/05/14","2020/05/14"),
dateNine = c("2020-05-14","2020-05-14","2020-05-14","2020-05-14")
)
dframe <- testdate
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if((nchar(j)<8&&nchar(j)<10)&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}(\\/|-|\\.)(0?[1-9]|1[012])(\\/|-|\\.)(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
if (dateReg1) {
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
tz="Europe/Vienna")
} else {
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%Y.%m.%d",
"%Y-%m-%d",
"%Y/%m/%d"),
tz="Europe/Vienna")
}
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
testdate <- data.frame(
dateOne = c("14.05.2020","14.05.2020","14.05.2020","14.05.2020"),
dateTwo = c("14/05/2020","14/05/2020","14/05/2020","14/05/2020"),
dateThree = c("14-05-2020","14-05-2020","14-05-2020","14-05-2020"),
dateFour = c("14-05-20","14-05-20","14-05-20","14-05-20"),
dateFive = c("14/05/20","14/05/20","14/05/20","14/05/20"),
dateSix = c("14.05.20","14.05.20","14.05.20","14.05.20"),
dateSeven = c("2020.05.14","2020.05.14","2020.05.14","2020.05.14"),
dateEight = c("2020/05/14","2020/05/14","2020/05/14","2020/05/14"),
dateNine = c("2020-05-14","2020-05-14","2020-05-14","2020-05-14")
)
test <- read.csv("/home/admin/Documents/testfile.csv")
dframe <- test
names <- names(dframe)
for(i in 1:ncol(dframe)) {
if (typeof(dframe[,i])=="character") {
isDate <- TRUE
for (j in dframe[,i]) {
if((nchar(j)<8&&nchar(j)<10)&&nchar(j)>0) {
isDate <- FALSE
} else if(nchar(j)==10 || nchar(j)==8) {
regexausdruck <- '^(?:(?:31(\\/|-|\\.)(?:0?[13578]|1[02]))\\1|(?:(?:29|30)(\\/|-|\\.)(?:0?[13-9]|1[0-2])\\2))(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$|^(?:29(\\/|-|\\.)0?2\\3(?:(?:(?:1[6-9]|[2-9]\\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\\d|2[0-8])(\\/|-|\\.)(?:(?:0?[1-9])|(?:1[0-2]))\\4(?:(?:1[6-9]|[2-9]\\d)?\\d{2})$'
dateReg1 <- grepl(regexausdruck, j)
print(dateReg1)
dateReg2 <- grepl("^\\d{4}(\\/|-|\\.)(0?[1-9]|1[012])(\\/|-|\\.)(0?[1-9]|[12][0-9]|3[01])$", j)
print(dateReg2)
#print(dateReg)
if(!dateReg1 && !dateReg2) {
isDate <- FALSE
}
}
}
#print(isDate)
if (isDate) {
# dframe[,i] <- as.POSIXct(dframe[,i], format="%d.%m.%Y")
# Timezone is very important!!
if (dateReg1) {
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%d.%m.%Y",
"%d-%m-%Y",
"%d/%m/%Y"),
tz="Europe/Vienna")
} else {
dframe[,i] <- as.POSIXct(dframe[,i],
tryFormats = c("%Y.%m.%d",
"%Y-%m-%d",
"%Y/%m/%d"),
tz="Europe/Vienna")
}
} else {
print(paste0(names[i], " ist kein Datum"))
}
print("--------------------------------")
}
}
dframe
View(testdate)
View(dframe)
